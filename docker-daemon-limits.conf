# Docker Daemon Resource Limits for Manager Nodes
# Place in: /etc/systemd/system/docker.service.d/limits.conf

[Service]
# Limit Docker daemon memory to prevent manager node memory exhaustion
# Reserve 1GB for system, allow Docker to use up to 75% of remaining memory
MemoryHigh=2800M
MemoryMax=3000M

# Limit number of tasks/processes to prevent resource exhaustion
TasksMax=4096

# Set memory accounting for proper resource tracking
MemoryAccounting=yes

# Restart policy for resilience
Restart=always
RestartSec=30s